# Window rules and layer rules
# ==============================================================================================================================================
# Based on JaKooLit dotfiles
# https://github.com/JaKooLit


# Tags
# --------------------------------------------------------------------------------------------------------------------------------------

# Browser
windowrule = tag +browser, match:class ^([Ff]irefox|[Ff]irefox-bin|floorp|zen)$
windowrule = tag +firefox, match:class ^([Ff]irefox|[Ff]irefox-bin|floorp|zen)$
windowrule = tag +browser, match:class ^(brave-browser|vivaldi-stable)$

# Social Media
windowrule = tag +social, match:class ^(org.telegram.desktop|discord)$

# Terminal
windowrule = tag +terminal, match:class ^(kitty|com.mitchellh.ghostty|wezterm)$

# Games
windowrule = tag +games, match:class ^(gamescope)$
windowrule = tag +games, match:class ^(steam_app_\d+)$

# Game Launcher
windowrule = tag +gamelauncher, match:class ^([Ss]team)$
windowrule = tag +gamelauncher, match:class ^([Ll]utris)$

# File Manager
windowrule = tag +filemanager, match:class ^(thunar|org.kde.dolphin)$

# Multimedia
windowrule = tag +multimedia, match:class ^(vlc|mpv|spotify|spotify-client)$

# Settings
windowrule = tag +settings, match:title (Kvantum Manager|kdesystemsettings)
windowrule = tag +settings, match:class ^(nm-applet|nm-connection-editor|blueman-manager)$
windowrule = tag +settings, match:class ^(pavucontrol|org.pulseaudio.pavucontrol|com.saivert.pwvucontrol)$
windowrule = tag +settings, match:class ^(qt5ct|qt6ct|nwg-displays|nwg-look)$
windowrule = tag +settings, match:class (xdg-desktop-portal-gtk)

# IDE
windowrule = tag +ide, match:class ^(dev.zed.Zed|code-oss|code|codium|jetbrains-.+)$

# Window rules
# --------------------------------------------------------------------------------------------------------------------------------------

# No transparency and blur for multimedia
windowrule = no_blur on, match:tag multimedia*
windowrule = opacity 1.0, match:tag multimedia*

# No blur for games
windowrule = no_blur on, match:tag games*
windowrule = fullscreen on, match:tag games*

# Prevent idle for fullscreen windows
windowrule = idle_inhibit fullscreen

windowrule = animation layers, match:class ^([Rr]ofi)$

# Float system monitor
windowrule = float on, match:title ^(System Monitor)$
windowrule = size 60% 60%, match:title ^(System Monitor)$
windowrule = float on, match:class ^(io.missioncenter.MissionCenter)$
windowrule = size 60% 60%, match:class ^(io.missioncenter.MissionCenter)$

# Float SDDM wallpaper updater dialogue
windowrule = float on, match:title ^(Update SDDM Wallpaper)$
windowrule = size 60% 60%, match:title ^(Update SDDM Wallpaper)$

# Float keybinds reference
windowrule = float on, match:title ^(Keybinds Reference)$
windowrule = size 80% 80%, match:title ^(Keybinds Reference)$

# Positioning
# ....................................................................................................

# Setting dialogues
windowrule = float on, match:tag settings*
windowrule = center on, match:tag settings*
windowrule = size 70% 70%, match:tag settings*

# File manager dialogues (replace with your preferred file manager)
windowrule = float on, match:class ([Tt]hunar), match:title negative:(.*[Tt]hunar.*)
windowrule = center on, match:class ([Tt]hunar), match:title negative:(.*[Tt]hunar.*)

# Firefox-based browsers dialogues (bookmarks, history, etc.)
windowrule = float on, match:tag firefox*, match:title ^(Library)$
windowrule = center on, match:tag firefox*, match:title ^(Library)$

# Image viewer (replace with your preferred image viewer)
windowrule = float on, match:class ^(org.gnome.Loupe|org.kde.gwenview)$
windowrule = center on, match:class ^(org.gnome.Loupe|org.kde.gwenview)$
windowrule = size 70% 70%, match:class ^(org.gnome.Loupe|org.kde.gwenview)$

# Archive manager dialogues (replace with your preferred archive manager)
windowrule = float on, match:class ^(org.kde.ark|xarchiver)$
windowrule = center on, match:class ^(org.kde.ark|xarchiver)$

# Waypaper
windowrule = float on, match:class ^(waypaper)$
windowrule = center on, match:class ^(waypaper)$

# Authentication dialogues
windowrule = float on, match:title ^(Authentication Required)$
windowrule = center on, match:title ^(Authentication Required)$
windowrule = float on, match:class ^(hyprpolkitagent|org.kde.polkit-kde-authentication-agent-1|org.gnome.polkit-gnome-authentication-agent-1)$

# Steam dialogues
windowrule = float on, match:class ^([Ss]team)$, match:title negative:^([Ss]team)$

# Picture-in-Picture
windowrule = float on, match:title ^(Picture-in-Picture)$
windowrule = pin on, match:title ^(Picture-in-Picture)$
windowrule = keep_aspect_ratio on, match:title ^(Picture-in-Picture)$

# File dialogues
windowrule = float on, match:title ^(Save As)$
windowrule = size 70% 60%, match:title ^(Save As)$
windowrule = center on, match:title ^(Save As)$
windowrule = float on, match:initial_title (Open Files)
windowrule = size 70% 60%, match:initial_title (Open Files)

# Clipboard manager
windowrule = float on, match:class (clipse)
windowrule = center on, match:class (clipse)
windowrule = size 622 652, match:class (clipse)
windowrule = stay_focused on, match:class (clipse)

# Calculator
windowrule = float on, match:class ^([Qq]alculate-gtk)$

# Move to workspace
# ....................................................................................................

windowrule = workspace 1, match:tag browser*
windowrule = workspace 3, match:tag social*
windowrule = workspace 4, match:tag ide*
windowrule = workspace 5, match:tag gamelauncher*
windowrule = workspace 6, match:tag games*

# Layer rules
# --------------------------------------------------------------------------------------------------------------------------------------

# Rofi
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0, match:namespace rofi
layerrule = dim_around on, match:namespace rofi
layerrule = xray 1, match:namespace rofi

# Notifications
layerrule = blur on, match:namespace notifications
layerrule = blur on, match:namespace swaync-control-center
layerrule = blur on, match:namespace swaync-notification-window
layerrule = ignore_alpha 0.5, match:namespace swaync-control-center
layerrule = ignore_alpha 0.5, match:namespace swaync-notification-window

# Logout
layerrule = blur on, match:namespace logout_dialog
layerrule = ignore_alpha 0.2, match:namespace logout_dialog
